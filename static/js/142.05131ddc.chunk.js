(()=>{"use strict";var e={142:(e,t,a)=>{var n=a(447);function r(e){return new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>{try{t(JSON.parse(n.result))}catch{a("The provided file failed to be parsed. Please check if it is corrupted.")}},n.onerror=()=>a("File read failed."),n.readAsText(e)}))}function s(e){const t={...e};if("empty"===e.type||"course"===e.type)delete t.error;else{const a=[];for(let t of e.members)a.push(s(t));t.members=a,delete t.error,delete t.error_cred,delete t.error_n}return t}const o=new n.U("main");o.version(2).stores({plans:"++index, title, startSem, sems",reqs:"name"}),self.onmessage=async e=>{const t=e.data;var a={...t,status:!0};try{switch(t.type){case"init":a.titles={},await o.transaction("rw",o.plans,(async()=>{a.content=await o.plans.get(t.plan),void 0===a.content&&(await o.plans.add({index:t.plan,...t.content}),a.content=t.content)})),await o.plans.each((e=>a.titles[e.index]=e.title));break;case"select":await o.transaction(t.force?"rw":"r",o.plans,(async()=>{const e=await o.plans.get(t.plan);void 0===e?t.force?await o.plans.add({index:t.plan,...t.content}):(a.status=!1,a.fail_message="Plan does not exist."):a.content=e}));break;case"export":const e=await o.plans.get(t.plan);delete e.index,a.content=JSON.stringify(e);break;case"add":a.plan=await o.plans.add(t.content);break;case"copy":a.plan=await o.transaction("rw",o.plans,(async()=>{const e={...await o.plans.get(t.plan),...t.content};return delete e.index,await o.plans.add(e)}));break;case"import":try{const e=await r(t.content);a.plan=await o.plans.add(e),a.content=e}catch(n){a.status=!1,a.fail_message=n}break;case"delete":await o.transaction("rw",o.plans,(async()=>{1===await o.plans.count()?(a.status=!1,a.fail_message="The only plan in your collection cannot be deleted."):await o.plans.delete(t.plan)}));break;case"update":await o.plans.update(t.plan,t.content);break;case"req_names":a.content=[],await o.reqs.each((e=>a.content.push(e.name)));break;case"req_select":const c=await o.reqs.get(t.req);void 0===c?(a.status=!1,a.fail_message="Requirement block does not exist."):a.content=c.content;break;case"req_export":{let e;"content"in t?e={name:t.req,content:s(t.content)}:"req"in t&&(e=await o.reqs.get(t.req)),void 0===e?(a.status=!1,a.fail_message="Requirement block does not exist."):a.content=JSON.stringify(e);break}case"req_import":try{const e=await r(t.content);a.req=t.req=e.name;try{a.content=t.content=s(e.content)}catch{throw"The provided file seems to be corrupted."}}catch(n){a.status=!1,a.fail_message=n;break}case"req_add":await o.transaction("rw",o.reqs,(async()=>{!t.force&&await o.reqs.where({name:t.req}).count()?a.clash=!0:(await o.reqs.put({name:t.req,content:t.content}),a.clash=!1)}));break;case"req_delete":const i=t.req;await o.transaction("rw",o.reqs,(async()=>{await o.reqs.where({name:i}).count()?await o.reqs.delete(i):(a.status=!1,a.fail_message="Requirement block does not exist.")}));break;case"req_update":await o.reqs.update(t.req,t.content)}}catch(n){a.status=!1,a.error=n.inner}self.postMessage(a)}}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.m=e,a.x=()=>{var e=a.O(void 0,[447],(()=>a(142)));return e=a.O(e)},(()=>{var e=[];a.O=(t,n,r,s)=>{if(!n){var o=1/0;for(p=0;p<e.length;p++){n=e[p][0],r=e[p][1],s=e[p][2];for(var c=!0,i=0;i<n.length;i++)(!1&s||o>=s)&&Object.keys(a.O).every((e=>a.O[e](n[i])))?n.splice(i--,1):(c=!1,s<o&&(o=s));if(c){e.splice(p--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[n,r,s]}})(),a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>"static/js/"+e+".cb0bf29b.chunk.js",a.miniCssF=e=>{},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="/credit-planner/",(()=>{var e={142:1};a.f.i=(t,n)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunkcredit_planner=self.webpackChunkcredit_planner||[],n=t.push.bind(t);t.push=t=>{var r=t[0],s=t[1],o=t[2];for(var c in s)a.o(s,c)&&(a.m[c]=s[c]);for(o&&o(a);r.length;)e[r.pop()]=1;n(t)}})(),(()=>{var e=a.x;a.x=()=>a.e(447).then(e)})();a.x()})();
//# sourceMappingURL=142.05131ddc.chunk.js.map