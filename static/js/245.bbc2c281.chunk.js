(()=>{"use strict";var a={245:(a,e,t)=>{const n=new(t(447).U)("main");n.version(1).stores({plans:"++index, title, startSem, sems"}),self.onmessage=async a=>{const e=a.data;var t={...e,status:!0};try{switch(e.type){case"init":t.titles={},await n.transaction("rw",n.plans,(async()=>{t.content=await n.plans.get(e.plan),void 0===t.content&&(await n.plans.add({index:e.plan,...e.content}),t.content=e.content)})),await n.plans.each((a=>t.titles[a.index]=a.title));break;case"select":await n.transaction(e.force?"rw":"r",n.plans,(async()=>{const a=await n.plans.get(e.plan);void 0===a?e.force?await n.plans.add({index:e.plan,...e.content}):(t.status=!1,t.fail_message="Plan does not exist."):t.content=a}));break;case"export":const a=await n.plans.get(e.plan);delete a.index,t.content=JSON.stringify(a);break;case"add":t.plan=await n.plans.add(e.content);break;case"copy":t.plan=await n.transaction("rw",n.plans,(async()=>{const a={...await n.plans.get(e.plan),...e.content};return delete a.index,await n.plans.add(a)}));break;case"import":const s=new FileReader;s.onload=async()=>{try{t.plan=await n.plans.add(JSON.parse(s.result))}catch(a){if(!(a instanceof SyntaxError))throw a;t.status=!1,t.fail_message="The provided file failed to be parsed. Please check if it is corrupted."}},s.onerror=()=>{t.status=!1,t.error="File read failed."},s.readAsText(e.content);break;case"delete":await n.transaction("rw",n.plans,(async()=>{1===await n.plans.count()?(t.status=!1,t.fail_message="The only plan in your collection cannot be deleted."):await n.plans.delete(e.plan)}));break;case"update":await n.plans.update(e.plan,e.content)}}catch(s){t.status=!1,t.error=s.inner}self.postMessage(t)}}},e={};function t(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return a[n](r,r.exports,t),r.exports}t.m=a,t.x=()=>{var a=t.O(void 0,[447],(()=>t(245)));return a=t.O(a)},(()=>{var a=[];t.O=(e,n,s,r)=>{if(!n){var i=1/0;for(p=0;p<a.length;p++){n=a[p][0],s=a[p][1],r=a[p][2];for(var o=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(t.O).every((a=>t.O[a](n[c])))?n.splice(c--,1):(o=!1,r<i&&(i=r));if(o){a.splice(p--,1);var l=s();void 0!==l&&(e=l)}}return e}r=r||0;for(var p=a.length;p>0&&a[p-1][2]>r;p--)a[p]=a[p-1];a[p]=[n,s,r]}})(),t.d=(a,e)=>{for(var n in e)t.o(e,n)&&!t.o(a,n)&&Object.defineProperty(a,n,{enumerable:!0,get:e[n]})},t.f={},t.e=a=>Promise.all(Object.keys(t.f).reduce(((e,n)=>(t.f[n](a,e),e)),[])),t.u=a=>"static/js/"+a+".cb0bf29b.chunk.js",t.miniCssF=a=>{},t.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),t.p="/",(()=>{var a={245:1};t.f.i=(e,n)=>{a[e]||importScripts(t.p+t.u(e))};var e=self.webpackChunkcredit_planner=self.webpackChunkcredit_planner||[],n=e.push.bind(e);e.push=e=>{var s=e[0],r=e[1],i=e[2];for(var o in r)t.o(r,o)&&(t.m[o]=r[o]);for(i&&i(t);s.length;)a[s.pop()]=1;n(e)}})(),(()=>{var a=t.x;t.x=()=>t.e(447).then(a)})();t.x()})();
//# sourceMappingURL=245.bbc2c281.chunk.js.map